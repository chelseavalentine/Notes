# Chapter 13: The Document Object Model


### Trees

* __tree__: a data structure that has a branching structure
    - is free of cycles (so a node can't contain itself, directly or indirecttly)
* nodes of the DOM:
    - regular elements' (`<div>`, `<p>`, etc.) node is 1
        + `document.ELEMENT_NODE`
    - texts' node is 3
        + `document.TEXT_NODE`
    - comments' node is 8
        + `document.COMMENT_NODE`
* You can figure out an element's node type with the property `.nodeType`
* the DOM can be used with more than just HTML (eg. XML)


### Moving through the tree

* Elements have the following useful properties:
    - `firstChild`, `lastChild`
    - `previousSibling`, `nextSibling`
    - If the specified property is non-existent, you'll get `null`


### Changing the document

* many built-in methods to change the document:
    - `.appendChild(element)`
    - `.removeChild(element)`
    - `.insertBefore(element1, element2)`
        + inserts the new node, element1 before element2
    - `.replaceChild(element1, element2)`
        + element1 (the new node) will replace element2


### Creating nodes

* you can create nodes
    - `document.createTextNode`


 ### Attributes

* You can set any attribute on nodes that you want, and access them through the JS
    - literally anything. You could have `<p yo="hi">Uh...</p>`
    - it's recommended that you prefix made-up ones with 'data-', to avoid accidentally setting a real attribute


### Layout

* access more attributes of an element
    - the space the element takes up (px): `offsetWidth`, `offsetHeight`
    - the space inside of an element, ignoring border width: `clietWidth`, `clientHeight`
    - the precise position of an element is accessed by `.getBoundingClientRect()`
        + it returns an object w/ `top`, `bottom`, `left`, & `right` properties
        + to make it relative to the entire document, add the current scroll position
            * global variables `pageXOffset` & `pageYOffset` indicate the current scroll position


### Query selectors

Can use CSS attribute selectors in JS with `.querySelectorAll([selector])`, but it isn't live. The behavior of the selector doesn't change as the document is changed.

```javascript
document.querySelectorAll("p > .animal"); // direct child of <p> with class of animal
```

`document.querySelector([selector])` will return the first matching element, or null if no match.


### Positioning and animating

Can use `requestAnimationFrame(callback)` to create JS animations. It'll run when the browser is ready to repaint the screen

Code snippet of it being used: 

```javascript
function animate(time) {
    if (lastTime != null)
        angle += (time - lastTime) * 0.001;
    lastTime = time;
    cat.style.top = (Math.sin(angle) * 20) + "px";
    cat.style.left = (Math.cos(angle) * 200) + "px";
    requestAnimationFrame(animate);
}

requestAnimationFrame(animate);
```



# Chapter 14: Handling Events

### Event handlers
